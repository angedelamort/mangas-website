{% extends "layouts/default.twig" %}

{% block content %}
    <div class="ui text container">
        {% if not hasDb %}
            <h1>Welcome to {{ site.name }}</h1>
            {% if error %}
                <div class="ui error message">{{ error }}</div>
            {% else %}
                <div class="ui warning message">No 'db.ini' found.</div>
            {% endif %}
            <h3>Initialize your database connection.</h3>
            <div class="ui segment">
                <form class="ui form" method="post" action="/db">
                    <div class="field">
                        <label>URI</label>
                        <input type="text" name="uri" placeholder="uri">
                    </div>
                    <div class="field">
                        <label>Database Name</label>
                        <input type="text" name="dbName" placeholder="db name">
                    </div>
                    <div class="field">
                        <label>Port</label>
                        <input type="text" name="port" placeholder="3306" value="3306">
                    </div>
                    <div class="field">
                        <label>Username</label>
                        <input type="text" name="username" placeholder="username">
                    </div>
                    <div class="field">
                        <label>Password</label>
                        <input type="password" name="password" placeholder="">
                    </div>
                    <button class="ui button" type="submit">Submit</button>
                </form>
            </div>
        {% elseif not hasAdmin %}
            <h1>Welcome to {{ site.name }}</h1>
            {% if error %}
                <div class="ui error message">{{ error }}</div>
            {% else %}
                <div class="ui warning message">No administrator found.</div>
            {% endif %}
            <h3>Create a site administrator.</h3>
            <div class="ui segment">
                <form class="ui form" method="post" action="/user">
                    <div class="field">
                        <label>Username</label>
                        <input type="text" name="username" placeholder="name">
                    </div>
                    <div class="field">
                        <label>E-Mail</label>
                        <input type="text" name="email" placeholder="e-mail">
                    </div>
                    <div class="field">
                        <label>Password</label>
                        <input type="password" name="password" placeholder="">
                    </div>
                    <button class="ui button" type="submit">Submit</button>
                </form>
            </div>
        {% else %}
            <div class="ui segment">
                ERROR!
            </div>
        {% endif %}
    </div>
{% endblock %}

{% block js %}
    {{parent()}}

    <script>
        // make the script inline since we don't want to have a separate file.
    </script>
{% endblock %}